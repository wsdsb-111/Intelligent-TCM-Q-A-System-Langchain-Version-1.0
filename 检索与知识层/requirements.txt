# ============================================================
# 检索与知识层 - 总体依赖
# ============================================================
# 包含：向量检索 + 图检索 + BM25检索
# 环境：Python 3.11.13
# 更新时间：2025-10-21
# 状态：✅ 已验证稳定运行
# ============================================================

# ============================================================
# 说明：
# 本文件是检索与知识层的总体依赖汇总
# 
# 子模块独立依赖：
# - faiss_rag/requirements.txt（Faiss向量数据库）
# - Graphrag/requirements.txt（知识图谱构建）
# 
# 如果只需要特定功能，请安装对应子模块的依赖
# ============================================================

# ============================================================
# 1. 向量数据库（Faiss + ChromaDB）
# ============================================================
faiss-cpu==1.7.4  # Faiss向量数据库（CPU版本）
# faiss-gpu==1.7.4  # Faiss向量数据库（GPU版本，如果有NVIDIA GPU）
chromadb==1.2.0
chroma-hnswlib==0.7.3
onnxruntime==1.16.3

# ============================================================
# 2. 知识图谱（Neo4j）
# ============================================================
neo4j==5.25.0
networkx==3.5

# ============================================================
# 3. Embeddings 模型
# ============================================================
sentence-transformers==2.3.1
transformers==4.36.2
huggingface-hub==0.24.0
tokenizers==0.15.0
safetensors==0.4.1
accelerate==0.25.0

# ============================================================
# 4. PyTorch（需先单独安装）
# ============================================================
# torch==2.1.2+cu118
# torchvision==0.16.2+cu118  
# torchaudio==2.1.2+cu118
# 安装命令：
# pip install torch==2.1.2+cu118 torchvision==0.16.2+cu118 torchaudio==2.1.2+cu118 --index-url https://download.pytorch.org/whl/cu118

# ============================================================
# 5. 数据处理
# ============================================================
numpy==1.26.4
pandas==2.0.3
scipy==1.11.4
scikit-learn==1.3.2

# ============================================================
# 6. NLP 工具
# ============================================================
nltk==3.8.1
jieba==0.42.1
sentencepiece==0.2.1

# ============================================================
# 7. 工具库
# ============================================================
tqdm==4.66.3
colorama==0.4.6
rich==13.7.1

# ============================================================
# 8. HTTP 和数据序列化
# ============================================================
httpx==0.28.1
httpcore==1.0.9
requests==2.32.5
pyyaml==6.0.3
orjson==3.11.3

# ============================================================
# 9. 其他依赖
# ============================================================
pydantic==2.12.3
pydantic-core==2.41.4
filelock==3.19.1

# ============================================================
# 安装说明
# ============================================================
# 
# 完整安装（所有检索功能）：
# 1. pip install torch==2.1.2+cu118 torchvision==0.16.2+cu118 torchaudio==2.1.2+cu118 --index-url https://download.pytorch.org/whl/cu118
# 2. pip install -r requirements.txt
# 3. cd faiss_rag && pip install -r requirements.txt
# 4. cd Graphrag && pip install -r requirements.txt
# 
# 最小安装（仅向量检索）：
# 1. pip install torch==2.1.2+cu118 --index-url https://download.pytorch.org/whl/cu118
# 2. cd faiss_rag && pip install -r requirements.txt
# 
# 服务依赖：
# - Neo4j 数据库（知识图谱）
# - vLLM 服务（图谱构建，可选）
# ============================================================
